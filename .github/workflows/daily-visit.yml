name: Daily Web Visitor

on:
  schedule:
    - cron: '17 0 * * *'
  workflow_dispatch:

jobs:
  visit-website:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        pip install playwright playwright-stealth
        # 브라우저 바이너리 및 필수 의존성 설치
        playwright install chromium
        playwright install-deps chromium
    
    - name: Run web visitor script
      run: python web_visitor.py
      env:
        # 필요시 환경변수 전달
        TARGET_URLS: ${{ secrets.TARGET_URLS }}
